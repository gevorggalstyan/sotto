<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="stylesheet" href="/src/styles.css" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Sotto App</title>
    <script type="module" src="/src/main.ts" defer></script>
  </head>

  <body>
    <main class="settings-container">
      <header class="settings-header">
        <h1>Settings</h1>
        <p class="subtitle">Configure your Sotto preferences</p>
      </header>

      <div class="settings-content">
        <nav class="settings-nav">
          <button class="nav-item active" data-tab="general">
            <i data-lucide="settings" class="icon"></i>
            General
          </button>
          <button class="nav-item" data-tab="troubleshooting">
            <i data-lucide="wrench" class="icon"></i>
            Troubleshooting
          </button>
          <button class="nav-item" data-tab="about">
            <i data-lucide="info" class="icon"></i>
            About
          </button>
        </nav>

        <div class="settings-panel">
          <!-- General Settings -->
          <div class="tab-content active" id="general">
            <h2>General</h2>

            <div class="setting-group">
              <div class="setting-item model-setting">
                <div class="setting-label">
                  <label>Whisper Model</label>
                  <span class="setting-description">Choose model size (larger = more accurate, slower)</span>
                </div>
                <div class="model-groups">
                  <div class="model-group">
                    <h3 class="model-group-title">Tiny Models · Ultra Fast</h3>
                    <div class="model-grid">
                      <div class="model-card" data-model="tiny">
                        <div class="model-card-header">
                          <span class="model-name">Tiny</span>
                          <span class="model-size">75MB</span>
                        </div>
                        <div class="model-card-footer">
                          <button class="model-button" data-model="tiny">Use Model</button>
                          <span class="model-status" data-status>Checking...</span>
                        </div>
                      </div>
                      <div class="model-card" data-model="tiny.en">
                        <div class="model-card-header">
                          <span class="model-name">Tiny English</span>
                          <span class="model-size">75MB</span>
                        </div>
                        <div class="model-card-footer">
                          <button class="model-button" data-model="tiny.en">Use Model</button>
                          <span class="model-status" data-status>Checking...</span>
                        </div>
                      </div>
                      <div class="model-card" data-model="tiny-q5_1">
                        <div class="model-card-header">
                          <span class="model-name">Tiny Q5</span>
                          <span class="model-size">31MB</span>
                        </div>
                        <div class="model-card-footer">
                          <button class="model-button" data-model="tiny-q5_1">Use Model</button>
                          <span class="model-status" data-status>Checking...</span>
                        </div>
                      </div>
                      <div class="model-card" data-model="tiny.en-q5_1" data-default="true">
                        <span class="model-badge">Recommended</span>
                        <div class="model-card-header">
                          <span class="model-name">Tiny English Q5</span>
                          <span class="model-size">31MB</span>
                        </div>
                        <div class="model-card-footer">
                          <button class="model-button" data-model="tiny.en-q5_1">Use Model</button>
                          <span class="model-status" data-status>Checking...</span>
                        </div>
                      </div>
                      <div class="model-card" data-model="tiny-q8_0">
                        <div class="model-card-header">
                          <span class="model-name">Tiny Q8</span>
                          <span class="model-size">42MB</span>
                        </div>
                        <div class="model-card-footer">
                          <button class="model-button" data-model="tiny-q8_0">Use Model</button>
                          <span class="model-status" data-status>Checking...</span>
                        </div>
                      </div>
                      <div class="model-card" data-model="tiny.en-q8_0">
                        <div class="model-card-header">
                          <span class="model-name">Tiny English Q8</span>
                          <span class="model-size">42MB</span>
                        </div>
                        <div class="model-card-footer">
                          <button class="model-button" data-model="tiny.en-q8_0">Use Model</button>
                          <span class="model-status" data-status>Checking...</span>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="model-group">
                    <h3 class="model-group-title">Base Models · Fast</h3>
                    <div class="model-grid">
                      <div class="model-card" data-model="base">
                        <div class="model-card-header">
                          <span class="model-name">Base</span>
                          <span class="model-size">142MB</span>
                        </div>
                        <div class="model-card-footer">
                          <button class="model-button" data-model="base">Use Model</button>
                          <span class="model-status" data-status>Checking...</span>
                        </div>
                      </div>
                      <div class="model-card" data-model="base-q5_1">
                        <div class="model-card-header">
                          <span class="model-name">Base Q5</span>
                          <span class="model-size">57MB</span>
                        </div>
                        <div class="model-card-footer">
                          <button class="model-button" data-model="base-q5_1">Use Model</button>
                          <span class="model-status" data-status>Checking...</span>
                        </div>
                      </div>
                      <div class="model-card" data-model="base-q8_0">
                        <div class="model-card-header">
                          <span class="model-name">Base Q8</span>
                          <span class="model-size">78MB</span>
                        </div>
                        <div class="model-card-footer">
                          <button class="model-button" data-model="base-q8_0">Use Model</button>
                          <span class="model-status" data-status>Checking...</span>
                        </div>
                      </div>
                      <div class="model-card" data-model="base.en">
                        <div class="model-card-header">
                          <span class="model-name">Base English</span>
                          <span class="model-size">142MB</span>
                        </div>
                        <div class="model-card-footer">
                          <button class="model-button" data-model="base.en">Use Model</button>
                          <span class="model-status" data-status>Checking...</span>
                        </div>
                      </div>
                      <div class="model-card" data-model="base.en-q5_1">
                        <div class="model-card-header">
                          <span class="model-name">Base English Q5</span>
                          <span class="model-size">57MB</span>
                        </div>
                        <div class="model-card-footer">
                          <button class="model-button" data-model="base.en-q5_1">Use Model</button>
                          <span class="model-status" data-status>Checking...</span>
                        </div>
                      </div>
                      <div class="model-card" data-model="base.en-q8_0">
                        <div class="model-card-header">
                          <span class="model-name">Base English Q8</span>
                          <span class="model-size">78MB</span>
                        </div>
                        <div class="model-card-footer">
                          <button class="model-button" data-model="base.en-q8_0">Use Model</button>
                          <span class="model-status" data-status>Checking...</span>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="model-group">
                    <h3 class="model-group-title">Small Models · Balanced</h3>
                    <div class="model-grid">
                      <div class="model-card" data-model="small">
                        <div class="model-card-header">
                          <span class="model-name">Small</span>
                          <span class="model-size">466MB</span>
                        </div>
                        <div class="model-card-footer">
                          <button class="model-button" data-model="small">Use Model</button>
                          <span class="model-status" data-status>Checking...</span>
                        </div>
                      </div>
                      <div class="model-card" data-model="small-q5_1">
                        <div class="model-card-header">
                          <span class="model-name">Small Q5</span>
                          <span class="model-size">181MB</span>
                        </div>
                        <div class="model-card-footer">
                          <button class="model-button" data-model="small-q5_1">Use Model</button>
                          <span class="model-status" data-status>Checking...</span>
                        </div>
                      </div>
                      <div class="model-card" data-model="small-q8_0">
                        <div class="model-card-header">
                          <span class="model-name">Small Q8</span>
                          <span class="model-size">252MB</span>
                        </div>
                        <div class="model-card-footer">
                          <button class="model-button" data-model="small-q8_0">Use Model</button>
                          <span class="model-status" data-status>Checking...</span>
                        </div>
                      </div>
                      <div class="model-card" data-model="small.en">
                        <div class="model-card-header">
                          <span class="model-name">Small English</span>
                          <span class="model-size">466MB</span>
                        </div>
                        <div class="model-card-footer">
                          <button class="model-button" data-model="small.en">Use Model</button>
                          <span class="model-status" data-status>Checking...</span>
                        </div>
                      </div>
                      <div class="model-card" data-model="small.en-q5_1">
                        <div class="model-card-header">
                          <span class="model-name">Small English Q5</span>
                          <span class="model-size">181MB</span>
                        </div>
                        <div class="model-card-footer">
                          <button class="model-button" data-model="small.en-q5_1">Use Model</button>
                          <span class="model-status" data-status>Checking...</span>
                        </div>
                      </div>
                      <div class="model-card" data-model="small.en-q8_0">
                        <div class="model-card-header">
                          <span class="model-name">Small English Q8</span>
                          <span class="model-size">252MB</span>
                        </div>
                        <div class="model-card-footer">
                          <button class="model-button" data-model="small.en-q8_0">Use Model</button>
                          <span class="model-status" data-status>Checking...</span>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="model-group">
                    <h3 class="model-group-title">Medium Models · Accurate</h3>
                    <div class="model-grid">
                      <div class="model-card" data-model="medium">
                        <div class="model-card-header">
                          <span class="model-name">Medium</span>
                          <span class="model-size">1.5GB</span>
                        </div>
                        <div class="model-card-footer">
                          <button class="model-button" data-model="medium">Use Model</button>
                          <span class="model-status" data-status>Checking...</span>
                        </div>
                      </div>
                      <div class="model-card" data-model="medium-q5_0">
                        <div class="model-card-header">
                          <span class="model-name">Medium Q5</span>
                          <span class="model-size">514MB</span>
                        </div>
                        <div class="model-card-footer">
                          <button class="model-button" data-model="medium-q5_0">Use Model</button>
                          <span class="model-status" data-status>Checking...</span>
                        </div>
                      </div>
                      <div class="model-card" data-model="medium-q8_0">
                        <div class="model-card-header">
                          <span class="model-name">Medium Q8</span>
                          <span class="model-size">785MB</span>
                        </div>
                        <div class="model-card-footer">
                          <button class="model-button" data-model="medium-q8_0">Use Model</button>
                          <span class="model-status" data-status>Checking...</span>
                        </div>
                      </div>
                      <div class="model-card" data-model="medium.en">
                        <div class="model-card-header">
                          <span class="model-name">Medium English</span>
                          <span class="model-size">1.5GB</span>
                        </div>
                        <div class="model-card-footer">
                          <button class="model-button" data-model="medium.en">Use Model</button>
                          <span class="model-status" data-status>Checking...</span>
                        </div>
                      </div>
                      <div class="model-card" data-model="medium.en-q5_0">
                        <div class="model-card-header">
                          <span class="model-name">Medium English Q5</span>
                          <span class="model-size">514MB</span>
                        </div>
                        <div class="model-card-footer">
                          <button class="model-button" data-model="medium.en-q5_0">Use Model</button>
                          <span class="model-status" data-status>Checking...</span>
                        </div>
                      </div>
                      <div class="model-card" data-model="medium.en-q8_0">
                        <div class="model-card-header">
                          <span class="model-name">Medium English Q8</span>
                          <span class="model-size">785MB</span>
                        </div>
                        <div class="model-card-footer">
                          <button class="model-button" data-model="medium.en-q8_0">Use Model</button>
                          <span class="model-status" data-status>Checking...</span>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="model-group">
                    <h3 class="model-group-title">Large Models · Best Quality</h3>
                    <div class="model-grid">
                      <div class="model-card" data-model="large-v3">
                        <div class="model-card-header">
                          <span class="model-name">Large v3</span>
                          <span class="model-size">2.9GB</span>
                        </div>
                        <div class="model-card-footer">
                          <button class="model-button" data-model="large-v3">Use Model</button>
                          <span class="model-status" data-status>Checking...</span>
                        </div>
                      </div>
                      <div class="model-card" data-model="large-v3-q5_0">
                        <div class="model-card-header">
                          <span class="model-name">Large v3 Q5</span>
                          <span class="model-size">1.1GB</span>
                        </div>
                        <div class="model-card-footer">
                          <button class="model-button" data-model="large-v3-q5_0">Use Model</button>
                          <span class="model-status" data-status>Checking...</span>
                        </div>
                      </div>
                      <div class="model-card" data-model="large-v3-turbo">
                        <div class="model-card-header">
                          <span class="model-name">Large v3 Turbo</span>
                          <span class="model-size">1.5GB</span>
                        </div>
                        <div class="model-card-footer">
                          <button class="model-button" data-model="large-v3-turbo">Use Model</button>
                          <span class="model-status" data-status>Checking...</span>
                        </div>
                      </div>
                      <div class="model-card" data-model="large-v3-turbo-q5_0">
                        <div class="model-card-header">
                          <span class="model-name">Large v3 Turbo Q5</span>
                          <span class="model-size">547MB</span>
                        </div>
                        <div class="model-card-footer">
                          <button class="model-button" data-model="large-v3-turbo-q5_0">Use Model</button>
                          <span class="model-status" data-status>Checking...</span>
                        </div>
                      </div>
                      <div class="model-card" data-model="large-v3-turbo-q8_0">
                        <div class="model-card-header">
                          <span class="model-name">Large v3 Turbo Q8</span>
                          <span class="model-size">834MB</span>
                        </div>
                        <div class="model-card-footer">
                          <button class="model-button" data-model="large-v3-turbo-q8_0">Use Model</button>
                          <span class="model-status" data-status>Checking...</span>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="model-footer">
                <button class="model-link" data-action="open-models">Open Models Location</button>
              </div>
            </div>
          </div>

          <!-- Troubleshooting -->
          <div class="tab-content" id="troubleshooting">
            <h2>Troubleshooting</h2>

            <div class="setting-group">
              <div class="troubleshooting-section">
                <h3><i data-lucide="mic" style="width: 20px; height: 20px; vertical-align: middle; margin-right: 8px;"></i>Microphone Access Issues</h3>
                <p><strong>Symptoms:</strong> Recording doesn't start, no orange dot in menu bar, mic icon stays gray</p>
                <p><strong>Solution:</strong></p>
                <ol>
                  <li>Open System Settings → Privacy & Security → Microphone</li>
                  <li>Find "Sotto" in the list and enable it</li>
                  <li>Restart Sotto</li>
                  <li>Try recording again with Option + Space</li>
                </ol>
              </div>

              <div class="troubleshooting-section">
                <h3><i data-lucide="keyboard" style="width: 20px; height: 20px; vertical-align: middle; margin-right: 8px;"></i>Accessibility Permission Issues</h3>
                <p><strong>Symptoms:</strong> Text doesn't insert at cursor, nothing happens when releasing hotkey</p>
                <p><strong>Solution:</strong></p>
                <ol>
                  <li>Open System Settings → Privacy & Security → Accessibility</li>
                  <li>Find "Sotto" in the list and enable it</li>
                  <li>Restart Sotto</li>
                  <li>Try transcribing again</li>
                </ol>
              </div>

              <div class="troubleshooting-section">
                <h3><i data-lucide="download" style="width: 20px; height: 20px; vertical-align: middle; margin-right: 8px;"></i>Model Download Issues</h3>
                <p><strong>Symptoms:</strong> "[Model not loaded]" appears, transcription doesn't work</p>
                <p><strong>What happens:</strong></p>
                <ul>
                  <li>On first launch, Sotto automatically downloads the Whisper model (~31MB) in the background</li>
                  <li>The app remains functional while downloading</li>
                  <li>Once complete, the model loads automatically</li>
                </ul>
                <p><strong>If download fails:</strong></p>
                <ol>
                  <li>Check your internet connection</li>
                  <li>Restart Sotto to retry the download</li>
                  <li>Check model location: <code>~/Library/Application Support/am.galstyan.sotto/models/</code></li>
                  <li>If needed, manually download <code>ggml-tiny.en-q5_1.bin</code> from <a href="https://huggingface.co/ggerganov/whisper.cpp/resolve/main/ggml-tiny.en-q5_1.bin" target="_blank">HuggingFace</a> and place it in the models folder</li>
                </ol>
              </div>

              <div class="troubleshooting-section">
                <h3><i data-lucide="zap" style="width: 20px; height: 20px; vertical-align: middle; margin-right: 8px;"></i>Performance Issues</h3>
                <p><strong>Symptoms:</strong> Transcription takes too long</p>
                <p><strong>Tips:</strong></p>
                <ul>
                  <li>Shorter recordings transcribe faster</li>
                  <li>First transcription after launch may be slower (model warmup)</li>
                  <li>Large v3 Turbo is optimized for M1/M2/M3 Macs with Metal GPU</li>
                  <li>Consider switching to a smaller model in General settings (when implemented)</li>
                </ul>
              </div>
            </div>
          </div>

          <!-- About Settings -->
          <div class="tab-content" id="about">
            <h2>About Sotto</h2>
            
            <div class="about-content">
              <div class="about-icon">
                <img src="/src-tauri/icons/Sotto Logo.png" alt="Sotto Logo" width="72" height="72">
              </div>
              <h3>Sotto</h3>
              <p class="version">Version 0.1.2</p>
              <p class="about-description">
                Voice transcription for macOS.
                <br><br>
                <strong>Privacy:</strong> All processing happens locally on your device.
                No data is sent to the cloud.
              </p>

              <div class="about-links">
                <a href="https://github.com/gevorggalstyan/sotto" class="link-button" target="_blank">
                  View on GitHub
                </a>
                <a href="https://github.com/gevorggalstyan/sotto/issues" class="link-button" target="_blank">
                  Report Issue
                </a>
              </div>

              <div class="about-footer">
                <p>© 2025 Gevorg Galstyan</p>
                <p class="license">Released under MIT License</p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </main>
  </body>
</html>
