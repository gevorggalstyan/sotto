<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="stylesheet" href="/src/styles.css" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Sotto App</title>
    <script type="module" src="/src/main.ts" defer></script>
  </head>

  <body>
    <main class="settings-container">
      <header class="settings-header">
        <h1>Settings</h1>
        <p class="subtitle">Configure your Sotto preferences</p>
      </header>

      <div class="settings-content">
        <nav class="settings-nav">
          <button class="nav-item active" data-tab="general">
            <i data-lucide="settings" class="icon"></i>
            General
          </button>
          <button class="nav-item" data-tab="troubleshooting">
            <i data-lucide="alert-circle" class="icon"></i>
            Troubleshooting
          </button>
          <button class="nav-item" data-tab="about">
            <i data-lucide="info" class="icon"></i>
            About
          </button>
        </nav>

        <div class="settings-panel">
          <!-- General Settings -->
          <div class="tab-content active" id="general">
            <h2>General</h2>

            <div class="setting-group">
              <div class="setting-item">
                <div class="setting-label">
                  <label for="model-selection">Whisper Model</label>
                  <span class="setting-description">Choose model size (larger = more accurate, slower)</span>
                </div>
                <select id="model-selection" class="select-input">
                  <optgroup label="Tiny Models (Ultra Fast)">
                    <option value="tiny">Tiny (75MB)</option>
                    <option value="tiny.en">Tiny English (75MB)</option>
                    <option value="tiny-q5_1">Tiny Q5 (31MB)</option>
                    <option value="tiny.en-q5_1" selected>Tiny English Q5 (31MB) ⭐ Recommended</option>
                    <option value="tiny-q8_0">Tiny Q8 (42MB)</option>
                    <option value="tiny.en-q8_0">Tiny English Q8 (42MB)</option>
                  </optgroup>
                  <optgroup label="Base Models (Fast)">
                    <option value="base">Base (142MB)</option>
                    <option value="base.en">Base English (142MB)</option>
                    <option value="base-q5_1">Base Q5 (57MB)</option>
                    <option value="base.en-q5_1">Base English Q5 (57MB)</option>
                    <option value="base-q8_0">Base Q8 (78MB)</option>
                    <option value="base.en-q8_0">Base English Q8 (78MB)</option>
                  </optgroup>
                  <optgroup label="Small Models (Balanced)">
                    <option value="small">Small (466MB)</option>
                    <option value="small.en">Small English (466MB)</option>
                    <option value="small.en-tdrz">Small English TDRZ (465MB)</option>
                    <option value="small-q5_1">Small Q5 (181MB)</option>
                    <option value="small.en-q5_1">Small English Q5 (181MB)</option>
                    <option value="small-q8_0">Small Q8 (252MB)</option>
                    <option value="small.en-q8_0">Small English Q8 (252MB)</option>
                  </optgroup>
                  <optgroup label="Medium Models (Accurate)">
                    <option value="medium">Medium (1.5GB)</option>
                    <option value="medium.en">Medium English (1.5GB)</option>
                    <option value="medium-q5_0">Medium Q5 (514MB)</option>
                    <option value="medium.en-q5_0">Medium English Q5 (514MB)</option>
                    <option value="medium-q8_0">Medium Q8 (785MB)</option>
                    <option value="medium.en-q8_0">Medium English Q8 (785MB)</option>
                  </optgroup>
                  <optgroup label="Large Models (Best Quality)">
                    <option value="large-v3-turbo">Large v3 Turbo (1.5GB)</option>
                    <option value="large-v3-turbo-q5_0">Large v3 Turbo Q5 (547MB)</option>
                    <option value="large-v3-turbo-q8_0">Large v3 Turbo Q8 (834MB)</option>
                    <option value="large-v3">Large v3 (3GB)</option>
                    <option value="large-v3-q5_0">Large v3 Q5 (1.1GB)</option>
                    <option value="large-v2">Large v2 (3GB)</option>
                    <option value="large-v2-q5_0">Large v2 Q5 (1.1GB)</option>
                    <option value="large-v2-q8_0">Large v2 Q8 (1.5GB)</option>
                    <option value="large-v1">Large v1 (3GB)</option>
                  </optgroup>
                </select>
              </div>
            </div>
          </div>

          <!-- Troubleshooting -->
          <div class="tab-content" id="troubleshooting">
            <h2>Troubleshooting</h2>

            <div class="setting-group">
              <div class="troubleshooting-section">
                <h3><i data-lucide="mic" style="width: 20px; height: 20px; vertical-align: middle; margin-right: 8px;"></i>Microphone Access Issues</h3>
                <p><strong>Symptoms:</strong> Recording doesn't start, no orange dot in menu bar, mic icon stays gray</p>
                <p><strong>Solution:</strong></p>
                <ol>
                  <li>Open System Settings → Privacy & Security → Microphone</li>
                  <li>Find "Sotto" in the list and enable it</li>
                  <li>Restart Sotto</li>
                  <li>Try recording again with Option + Space</li>
                </ol>
              </div>

              <div class="troubleshooting-section">
                <h3><i data-lucide="keyboard" style="width: 20px; height: 20px; vertical-align: middle; margin-right: 8px;"></i>Accessibility Permission Issues</h3>
                <p><strong>Symptoms:</strong> Text doesn't insert at cursor, nothing happens when releasing hotkey</p>
                <p><strong>Solution:</strong></p>
                <ol>
                  <li>Open System Settings → Privacy & Security → Accessibility</li>
                  <li>Find "Sotto" in the list and enable it</li>
                  <li>Restart Sotto</li>
                  <li>Try transcribing again</li>
                </ol>
              </div>

              <div class="troubleshooting-section">
                <h3><i data-lucide="download" style="width: 20px; height: 20px; vertical-align: middle; margin-right: 8px;"></i>Model Download Issues</h3>
                <p><strong>Symptoms:</strong> "[Model not loaded]" appears, transcription doesn't work</p>
                <p><strong>What happens:</strong></p>
                <ul>
                  <li>On first launch, Sotto automatically downloads the Whisper model (~1.5GB) in the background</li>
                  <li>The app remains functional while downloading</li>
                  <li>Once complete, the model loads automatically</li>
                </ul>
                <p><strong>If download fails:</strong></p>
                <ol>
                  <li>Check your internet connection</li>
                  <li>Restart Sotto to retry the download</li>
                  <li>Check model location: <code>~/Library/Application Support/am.galstyan.sotto/models/</code></li>
                  <li>If needed, manually download <code>ggml-tiny.en-q5_1.bin</code> from <a href="https://huggingface.co/ggerganov/whisper.cpp/resolve/main/ggml-tiny.en-q5_1.bin" target="_blank">HuggingFace</a> and place it in the models folder</li>
                </ol>
              </div>

              <div class="troubleshooting-section">
                <h3><i data-lucide="zap" style="width: 20px; height: 20px; vertical-align: middle; margin-right: 8px;"></i>Performance Issues</h3>
                <p><strong>Symptoms:</strong> Transcription takes too long</p>
                <p><strong>Tips:</strong></p>
                <ul>
                  <li>Shorter recordings transcribe faster</li>
                  <li>First transcription after launch may be slower (model warmup)</li>
                  <li>Large v3 Turbo is optimized for M1/M2/M3 Macs with Metal GPU</li>
                  <li>Consider switching to a smaller model in General settings (when implemented)</li>
                </ul>
              </div>
            </div>
          </div>

          <!-- About Settings -->
          <div class="tab-content" id="about">
            <h2>About Sotto</h2>
            
            <div class="about-content">
              <div class="about-icon">
                <img src="../src-tauri/icons/Sotto Logo.png" alt="Sotto Logo" width="72" height="72">
              </div>
              <h3>Sotto</h3>
              <p class="version">Version 0.1.0</p>
              <p class="about-description">
                Voice transcription for macOS.
                <br><br>
                <strong>Privacy:</strong> All processing happens locally on your device.
                No data is sent to the cloud.
              </p>

              <div class="about-links">
                <a href="https://github.com/gevorggalstyan/sotto" class="link-button" target="_blank">
                  View on GitHub
                </a>
                <a href="https://github.com/gevorggalstyan/sotto/issues" class="link-button" target="_blank">
                  Report Issue
                </a>
              </div>

              <div class="about-footer">
                <p>© 2025 Gevorg Galstyan</p>
                <p class="license">Released under MIT License</p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </main>
  </body>
</html>
